---
title: Zaui Web API

language_tabs: # must be one of https://git.io/vQNgJ
  - XML

toc_footers:
  - <a href='https://api.zaui.io/signup'>Sign Up for a Developer Key</a>
  - <a href='https://davidhayneshasgithub.github.io/ZauiIOAPI'>See our IO API Documentation</a>
  - <a href='https://davidhayneshasgithub.github.io/ZauiWebHook/#zaui-web-hook-and-remote-target-api'>See our Web-Hook and Remote Target Documentation</a>

search: true
---

# Getting Started

## Authentication Credentials
A word on some important items on the topic of authentication with your Zaui system:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Use of the ZAPI is always through an existing user (contact) in your Zaui system.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• There is no special ZAPI user.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Your required to add a new contact to your system when you wish to generate a new token.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Each application/service/user must have a single unique token
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Security is provided through your existing SSL certificate and is the only means of communicating with your Zaui system
<br>
<br>
Before starting, anyone organization wishing to use this API, must have been provided authentication credentials.

## Creating an API Token


Once you have created the contacts within your system you can now create and manage their ZAPI tokens. Tokens are managed from the **Contacts | Manage ZAPI Partners** from with in your Zaui system.
<br>
<br>
To create a new token:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Click Create ZAPI Partner from the left panel menu
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Select the contact/application/service from the list
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Click Save
<br>
<br>
Once you have added your new service to the system, your not able to bring up the “details” for this particular partner. Some of the details include the following:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Affiliate user name – this is the contacts name as you had created it
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Company/Organization – this is the parent organization that your contact is associated with
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• ZAPI Token – the token that must be used for this partner to communicated with your Zaui system.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Account Id: the account Id generated by your Zaui system. If your contact has a parent organization then this will have a value greater then zero.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• User Id: this is the unique Id generated by your Zaui system when you created the new contact in your system.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Last 20 ZAPI requests and responses from this client – this give a detailed break down of the last 20 communications between the systems.

#Submitting to the API

## ZAPI Server URI

All ZAPI requests to your Zaui system must be sent on the following URI:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**https://"mydomain".zaui.net/zapi/**
<br>
<br>
_All requests are POST_
<br>
_All requests are in XML, properly formatted for each function call_
<br>
_All responses are in XML_

## ZAPI Ping Test

>Example PHP Request

```xml
<request>
  <zapiToken>$token</zapiToken>
  <zapiAccountId>$accountId</zapiAccountId>
  <zapiUserId>$userId</zapiUserId>
  <zapiMethod>
  <methodName>zapiPing</methodName>
  </zapiMethod>
</request>"

```

> Example Ping Response

```xml
<response>
  <zapiVersion>2.0</zapiVersion>
  <error>0</error>
  <message>ZAPI Ok</message>
  <methodResponse>
    <methodName>zapiPing</methodName>
    <methodErrorMessage>zapiPing</methodErrorMessage>
  </methodResponse>
</response>
```

The ping ZAPI test is a great way to test if all components of your ZAPI client are working correctly.

## API Throttle


To ensure continuous quality of service, API usage can be subjected to throttling. The throttle will be applied once an API client reaches a certain threshold.
<br>
<br>
Zaui Software reserves the right to throttle any and all API clients to ensure quality of service for all Zaui Software customers.
<br>
<br>
Those clients who do encounter a throttle threshold will get met with a HTTP 503 response code and the error XML node populated.
<br>
<br>
We encourage all API developers to anticipate this error and take appropriate measures like:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Using a cached value from a previous call
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Passing on a message to the end user that is subjected to this behaviour (if any)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• <a href="#implementing-exponential-back-off">Implement exponential back-off</a> in your logic

## Implementing Exponential Back-Off

Exponential back-off is the process of a client periodically retrying a failed request over an increasing amount of time. **_It is a standard error handling strategy for network applications._** Besides being “required”, using exponential back-off increases the efficiency of bandwidth usage, reduces the number of requests required to get successful response, and maximizes the throughput of requests in concurrent environments.
<br>
<br>
The flow of implementing a simple exponential back-off is as follows:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. Make a request to the API
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. Receive the response, check for error that has a retry-able error code (such as 503)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3. Wait 1s + random_number_milliseconds seconds
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4. Retry request
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5. Receive the response, check for error that has a retry-able error code (such as 503)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6. Wait 2s + random_number_milliseconds seconds
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7. Retry request
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8. Receive the response, check for error that has a retry-able error code (such as 503)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9. Wait 4s + random_number_milliseconds seconds
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10. Retry request
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11. Receive the response, check for error that has a retry-able error code (such as 503)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12. Wait 8s + random_number_milliseconds seconds
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13. Retry request
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14. Receive the response, check for error that has a retry-able error code (such as 503)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15. Wait   seconds
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16. Retry request
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17. If you still get an error, stop and log the error
<br>
<br>
**Note:** random_number_milliseonds MUST be redefined after each “Wait”
<br>
<br>
In the above flow, **random_number_milliseconds** is a random number of milliseconds less than or equal to 1000. This is necessary to avoid certain lock errors in some concurrent implementations.
<br>
<br>
**Note:** the wait is always (2^n) + random_number_milliseconds, where n is a monotonically increasing integer initially defined as 0. N is incremented by 1 for each iteration (each request)
<br>
<br>
The algorithm is set to terminate when n == 5. This ceiling is in place to prevent clients from retrying infinitely, and results in a total delay of 32 seconds before a deemed “unrecoverable error”.


# Supporting XML Nodes

Through many of our XML calls, we make use of common objects which eventually are represented in our XML responses that are returned.

We will outline some of those common nodes here, and where they are part of the response we will reference that.

## Single Booking Details Node

> Example Booking Details Node

```xml
<bookingDetails>
  <bookingNumber></bookingNumber>
  <activities>
    <activity>
      <cartItemId></cartItemId> (optional)
      <packageId></packageId> (optional)
      <packgeName></packageName> (optional)
      <activityId></activityId>
      <activityType></activityType>
      <activityName></activityName>
      <activityDate/></activityDate>
      <activityTime></activityTime>
      <pickupLocationId></pickupLocationId>
      <pickupLocationName></pickupLocationName> 
      <pickupLocationAddress></pickupLocationAddress>
      <dropOffLocationId></dropOffLocationId>
      <dropOffLocationName></dropOffLocationName>
      <dropOffAddress></dropOffAddress>
      <notes></notes>
      <bookingHistoryNote></bookingHistoryNote>
      <seniors></seniors>
      <adults></adults>
      <students></students>
      <children></children>
      <infants></infants>
      <passengersAsString></passengersAsString>
      <totalCost></totalCost>
      <pricingOptions/></pricingOptions>
      <onStandby> </onStandby>
      <onWaitList> </onWaitList>
      <waitListId></waitListId>
    </activity>
  </activities>
  <products/>
    <product>
      <productId></productId>
      <cartItemId></cartItemId> (optional)
      <packageId></packageId> (optional)
      <packgeName></packageName> (optional)
      <productName></productName>
      <quantity></quantity>
      <price></price>
      <total></total>
    <product>
  </products>
  <transactions>
    <transaction>
      <transactionId></transactionId>
      <transactionName></transactionName>
      <wholesaleCompanyId></wholesaleCompanyId>
      <wholesaleCompanyName></wholesaleCompanyName>
      <wholesalePrimaryAddr>
        <primAddr></primAddr>
        <primCity></primCity>
        <primProvince></primProvince>
        <primPostalCode></primPostalCode>
        <primCountry></primCountry>
      </wholesalePrimaryAddr>
      <wholesaleSecondaryAddr>
        <secAddr></secAddr>
        <secCity></secCity>
        <secProvince></secProvince>
        <secPostalCode></secPostalCode>
        <secCountry></secCountry>
      </wholesaleSecondaryAddr>
      <wholesaleCertNumber></wholesaleCertNumber> 
      <wholesaleCompanyUserId></wholesaleCompanyUserId> 
      <wholesaleCommissionName></wholesaleCommissionName> 
      <wholesaleCommissionRate></wholesaleCommissionRate>
      <wholesaleCommissionAmount></wholesaleCommissionAmount> 
      <transactionMethod></transactionMethod>
      <transactionAmount></transactionAmount>
      <transactionDate></transactionDate>
    </transaction>
  </transactions>
  <outstandingBalance></outstandingBalance>
  <bookingBalance>
    <hasOutstandingBalance></hasOutstandingBalance>
    <balance></balance>
    <balanceFormated></balanceFormated>
  </bookingBalance>
  <subTotal></subTotal>
  <tax></tax>
  <total></total>
</bookingDetails>

```

When retrieving details for a single activity node, using various request calls in the system, Zaui will returned a described single booking activity node in the following way:
<br>
<br>

## Currencies Node

> Example Currencies Node

```xml
<currencies>
  <currency>
    <currencyName></currencyName>
    <currencySymbol></currencySymbol>
    <isoCode></isoCode>
    <paymentGatewayId></paymentGatewayId>
    <rateId></rateId>
    <rate></rate>
    <totalConvertedWithRate></totalConvertedWithRate>
  </currency>
</currencies>
```

Since users of the back office system in Zaui can configure currencies, based on the sale dates in the system, the API will return.

## Cart Node

> Example Cart Node

```xml
<cart>
  <cartId></cartId>
  <customers>
    <customer>
    </customer>
  </customers>
  <activities/>
  <products/>
  <transactions/>
  <remainingBalance>
    <balance></balance>
  </remainingBalance>
  <cartTotals>
    <bookingNumber></bookingNumber>
    <modifyBookingNumber></modifyBookingNumber>
    <activityTotal>$0.00</activityTotal>
    <activityTax>$0.00</activityTax>
    <productTotal>$0.00</productTotal>
    <productTax>$0.00</productTax>
    <packageTotal>$0.00</packageTotal>
    <activitySurplusFees>$0.00</activitySurplusFees>
    <surchargeTotal>$0.00</surchargeTotal>
    <perPersonTax>$0.00</perPersonTax>
    <total>$0.00</total>
    <tax>$0.00</tax>
    <totalIncludingTax>$0.00</totalIncludingTax>
  </cartTotals>
    {CURRENCIES NODE}
</cart>
```

The following XML represents the cart node structure, and will depend on the contents of the cart.

## Activity Times Node

> Example Activity Times Node

```xml
<activityTimes>
  <activityTime>
    <activityStartTime></activityStartTime>
    <activityTimeCancelled></activityTimeCancelled>
    <activityTimeOnlineOnly></activityTimeOnlineOnly>
    <activityTimeAvailable></activityTimeAvailable>
    <activityTimeAvailableMessage></activityTimeAvailableMessage>
    <inventoryCheckCode></inventoryCheckCode>
    <inventoryCheckMessage></inventoryCheckMessage>
    <activityTimeSpotsRemaining></activityTimeSpotsRemaining>
  </activityTime>
</activityTimes>
```

The following XML represents a single activity time node, but depending on the type of activity which the request is for, you may have many of these returned. The <activityTimes> node is singular and the <activityTime> node can be many.

## Business Hours Node

> Example Business Hours Node

```xml
<businessHours>
  <hours>
    <startDate></startDate>
    <openingTime></openingTime>
    <closingTime></closingTime>
    <endDate></endDate>
  </hours>
</businessHours>
```

Basic result data for business hours when sent back in response structures.

## Pickup Locations Node

> Example Pickup Locations Node

```xml
<pickupLocations>
  <locationName></locationName>
  <locationId></locationId>
</pickupLocations>
```
Basic result data for pickup locations when sent back in response structures.

## Drop-Off Locations Node

> Example Drop-Off Locations Node

```xml
<dropOffLocations>
  <locationName></locationName>
  <locationId></locationId>
</dropOffLocations>
```

Basic result data for drop-off locations when sent back in response structures.


## Rental Date/Times Node

> Example Rental Date/Times Node

```xml
<rentalStartDateTimes>
  <rentalStartDate>
    <date></date>
    <rentable></rentable>
    <equipmentId></equipmentId>
  </rentalStartDate>
</rentalStartDateTimes>
```

Basic result data for rentals when checking on inventory for the rental.

## Allowed Guest Types

> Example Allowed Guest Types

```xml
<allowedPassengers>
  <passengerType>
    <systemTypeId></systemTypeId>
    <systemTypeName></systemTypeName>
    <name></name>
    <defaultValue></defaultValue>
    <basePrice></basePrice>
  </passengerType>
</allowedPassengers>
```
Basic result data describing the allowed guest types for any given activity or package in the system.

## Waitlist Node

> Example Waitlist Node

```xml
<waitListGuests>
  <guest>
    <waitListId></waitListId>
    <firstName></firstName>
    <lastName></lastName>
    <mobilePhone></mobilePhone>
    <email></email>
    <comments></comments>
    <dateCreated></dateCreated>
    {PASSENGERS_NODE}
  </guest>
</waitListGuests>

```

Basic node describing wait list guests in the system.

## Passengers List Node

> Example Passengers List Node

```xml
<rootNodeName>
  <rootNodeNameID></rootNodeNameID>
  <rootNodeNameHashKey></rootNodeNameHashKey>
  <accountId></accountId>
  <expiryDate></expiryDate>
  <firstName></firstName>
  <lastName></lastName>
  <username></username>
  <mobilePhone></mobilePhone>
  <email></email>
  <gender></gender>
  <addressline1></addressline1>
  <addressline2></addressline2>
  <city></city>
  <state></state>
  <country></country>
  <zipCode></zipCode>
  <dateCreated></dateCreated>
    {USER_CUSTOM_FIELDS_NODE}
  <relatedBookings>
    <totalNumberOfBookings></totalNumberOfBookings>
    <totalPurchases></totalPurchases>
    <allBookings></allBookings>
  </relatedBookings>
</guestDetails>

```

Basic node describing a single guest in the system.

Please note the root node here will be either **<guestDetails>** or **<agentDetails>**

## User Custom Fields Node

> When GETTING user profiles, the user custom field data will be send back in the following format.

```xml
<userCustomFields>
  <customField>
    <customFieldId></customFieldId>
    <customFieldRequired></customFieldRequired>
    <customFieldLabel></customFieldLabel>
    <customFieldValue></customFieldValue>
  </customField>
</userCustomFields>
```
>When UPDATING user profiles, the user custom data is expected in the following format.

```xml
<userCustomFields>
  <customField>
    <customFieldId></customFieldId>
    <customFieldValue></customFieldValue>
  </customField>
  <customField>
    <customFieldId></customFieldId>
    <customFieldValue></customFieldValue>
  </customField>
  <customField>
    <customFieldId></customFieldId>
    <customFieldValue></customFieldValue>
  </customField>
</userCustomFields>
```

These are fields that can be defined using the back office of Zaui, providing an easy mechanism to create and define your own custom user fields within the system.

## Transaction Details Node

> Basic transaction node.

```xml
<transactionDetails>
  <transactionId></transactionId>
  <transactionName></transactionName>
  <transactionMethod></transactionMethod>
  <transactionAmount></transactionAmount>
  <transactionDate></transactionDate>
</transactionDetails>
```

> Basic credit card transaction example node.

```xml
<transactionDetails>
  <transactionType></transactionType>
  <transactionAmount></transactionAmount>
  <creditCardDetails>
    <nameOnCard></nameOnCard>
    <number></number>
    <expMonth></expMonth>
    <expYear></expYear>
    <csv></csv>
    <paymentGatewayId></paymentGatewayId>
    <currencyId></currencyId>
  </creditCardDetails>
</transactionDetails>
```
> Basic voucher/invoice transaction example node:

```xml
<transactionDetails>
  <transactionType></transactionType>
  <transactionAmount></transactionAmount>
  <details>
    <companyAgentId></companyAgentId> (optional)
    <companyId></companyId>
    <voucherNumber></voucherNumber>
  </details>
  <activities>
    <activity>
      <cartItemId></cartItemId>
    </activity>
  </activities>
  <products>
    <product>
      <cartItemId></cartItemId>
    </product>
  </products>
</transactionDetails>
```

> Basic discount transaction example node:

```xml
<transactionDetails>
  <transactionType></transactionType>
  <transactionAmount></transactionAmount>
  <details>
    <discountId></discountId>
    <activities>
      <cartItemId></cartItemId>
    </activities>
    <products>
      <cartItemId></cartItemId>
    </products>
  </details>
</transactionDetails>
```
Refer to the trailing appendix in this document for those transaction which are available on the API.

Depending on the type of transaction being submitted, your request will be required to provide particular
details for that transaction.

**NOTE:** For all invoice/voucher and discount transaction, you must provide a activity and/or product cart item id, indicating which item you wish to have the invoice/voucher or discount transaction applied to.
<br>
**NOTE:** paymentGatewayId – optionally your call can include a different payment gateway ID, then was is used as the default in your system. Payment gateways are passed through on the zapiGetSystemInformation call currencyId – passing this will indicate that you wish to transaction the payment for a specific currency.
<br>
<br>
To enable this you must:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Have currencies enabled in your system
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Must have a valid currency for the sale date
<br>
<br>
Valid currencies for your order are always passed back as part of the Cart Object. When using this feature, in conjunction with the paymentGatewayId field, please note, if the currencyId you have passed already has configured a payment gateway, this will be used instead of the paymentGatewayId you have passed. If the currencyId doesn’t have a payment gateway configured, then the paymentGatewayId passed will be used. If neither of these are configured, the default gateway will be used.

## Days of Week Availability Node

> Example Days of Week Availability Node

```xml
<daysOfWeekAvailable>
  <dateRange>
    <startDate/>
    <daysOfWeek>
      <monday></monday>
      <tuesday></tuesday>
      <wednesday></wednesday>
      <thrusday></thrusday>
      <friday></friday>
      <saturday></saturday>
      <sunday></sunday>
    </daysOfWeek>
    <endDate></endDate>
  </dateRange>
</daysOfWeekAvailable>

```

The days of week XML node provide a description of configuration, by date ranges, of the days of the week which the activity is available.

## Price Code Nodes

> Example Price Code Node

```xml
<priceCodes>
  <priceCode>
    <priceCodeId></priceCodeId>
    <priceCodeTypeAsString></priceCodeTypeAsString>
    <priceCodeName></priceCodeName>
    <priceCodeBands>
      <band>
        <minValue></minValue>
        <maxValue></maxValue>
        <bandPricing>
          <passengerType></passengerType>
            <systemTypeId></systemTypeId>
            <systemTypeName></systemTypeName>
            <name></name>
            <defaultValue></defaultValue>
            <basePrice></basePrice>
          </passengerType>
        </bandPricing>
      </band>
    </priceCodeBands>
  </priceCode>
</priceCodes>
```

The following XML node describes a single price code as configured within the system.

## Package Multi-Day Itinerary Node

> Example Package Multi-Day Itinerary Node

```xml
<multiDayItineraries>
  <multiDayItinerary>
    <startDate></startDate>
    <endDate></endDate>
    {PRICE CODE NODE}
    <days>
      <day>
        <activities>
          <activity>
            <activityId></activityId>
            <activityName></activityName>
          </activity>
        </activities>
        <products>
          <product>
            <productId></productId>
            <productName></productName>
          </product>
        </products>
      </day>
    </days>
  </multiDayItinerary>
</multiDayItineraries>
```

For some packages, namely where the packageType field is indicating that the requested package is a multi-day itinerary package, Zaui will send back to you the following XML structure which describes the configuration for each day.

This XML node will generally be present where the packageType field is available, and its set to indicating multi-day itinerary.

## Booking Node - Search Results

> Example Search Results Booking Node

```xml
<booking>
  <bookingNumber></bookingNumber>
  <guestId/>
  <guestHaskKey/>
  <lastName></lastName>
  <firstName></firstName>
  <email></email>
  <mobilePhone></mobilePhone>
  <outstandingBalance></outstandingBalance>
  <bookingBalance>
    <hasOutstandingBalance></hasOutstandingBalance>
    <balance></balance>
    <balanceFormated></balanceFormated>
  </bookingBalance>
  <subTotal></subTotal>
  <tax></tax>
  <total></total>
  <reservationist></reservationist>
  <activities>
    <activity>
      <activityName></activityName>
      <activityId></activityId>
      <activityType></activityType>
      <packageId></packageId>
      <packageName></packageName>
      <activityDate></activityDate>
      <activityDateTime></activityDateTime>
      <pickupLocationId></pickupLocationId>
      <pickupTime></pickupTime>
      <pickupName></pickupName>
      <pickupLocationAddress></pickupLocationAddress>
      <dropOffLocationId></dropOffLocationId>
      <dropoffTime></dropoffTime>
      <dropoffName></dropoffName>
      <dropOffLocationAddress></dropOffLocationAddress>
      <commmisionAgentId></commmisionAgentId>
      <commissionAgentName></commissionAgentName>
      <commissionAgentCompany></commissionAgentCompany>
      <rentalEndDate></rentalEndDate>
      <rentalStartTime></rentalStartTime>
      <rentalEndTime></rentalEndTime>
      <rentalEndDate></rentalEndDate>
      <notes></notes>
      <passengers>
        <seniors></seniors>
        <adults></adults>
        <students></students>
        <children></children>
        <infants></infants>
        <passengersAsString></passengersAsString>
      </passengers>
      <passengersAsString></passengersAsString>
      <totalCost></totalCost>
      <pricingOptions/>
      <checkedInStatus></checkedInStatus>
      <onStandby></onStandby>
      <onWaitList></onWaitList>
      <waitListId></waitListId>
    </activity>
  </activities>
  <products/>
</booking>

```

We have standardized the result set for each booking which is returned as the result from a search API call. An example would be, searching for a specific booking ID.

## Mobile Data Node

> Example Mobile Data node

```xml
<mobileData>
  <mobileDeviceData>
    <model></model>
    <name></name>
    <systemName></systemName>
    <systemVersion></systemVersion>
  </mobileDeviceData>
  <iosLocationServiceData>
    <altitude></altitude>
    <coordinate></coordinate>
    <course></course>
    <horizontalAccuracy></horizontalAccuracy>
    <verticalAccuracy></verticalAccuracy>
    <speed></speed>
    <timeStamp></timeStamp>
  </iosLocationServiceData>
</mobileData>

```

As part of some of our API calls, you can pass along additional location service data, to be stored into the system for subsequent reporting.

# General API Calls

## ZapiPing

> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiToken></zapiToken>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiMethod>
    <methodName>zapiPing</methodName>
  </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <zapiVersion>2.0</zapiVersion>
  <error>0</error>
  <message>ZAPI Ok</message>
  <methodResponse>
    <methodName>zapiPing</methodName>
    <methodErrorMessage>Pong</methodErrorMessage>
  </methodResponse>
</response>
```

## Get System Information

> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiGetSystemInformation</methodName>
  </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName/>
      <methodErrorCode/>
      <methodErrorMessage/>
     <systemName/>
     <companyName/>
     <companyTelephoneNumber/>
     <systemLogo/>
     <currentVersion/>
     {BUSINESS HOURS NODE}
     <systemDateTime/>
     <systemTimeZoneAsString/>
     <currencySettings>
        <currencySignificantDigits/>
        <currencySymbol/>
     </currencySettings>
     <currencies>
        <currency>
           <currencyName/>
           <currencySymbol/>
           <isoCode/>
           <paymentGatewayId/>
           <rate/>
        </currency>
     </currencies>
     {PASSENGERS_NODE}
     <airlines>
        <airline>
           <airlineId/>
           <airlineName/>
           <airlineAbbreviation/>
        </airline>
     </airlines>
   </methodResponse>
</response>

```

## Generate Bar Code Image

> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiGenerateBarCodeImage</methodName>
    <bookingNumber></bookingNumber>
    <type></type>
    <activityId></activityId>
    <activityDate></activityDate>
    <productId></productId>
    <productDate></productDate>
  </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGenerateBarCodeImage</methodName>
      <activity>
         <activityName/>
         <activityId/>
         <activityDate/>
         <categoryName/>
         <categoryId>1</categoryId>
         <barCodeImage/>
      </activity>
      <product>
         <productName/>
         <productId/>
         <productDate/>
         <categoryName/>
         <categoryId>1</categoryId>
         <barCodeImage/>
      </product>
   </methodResponse>
</response>
```

# Interacting with a Cart Session API Calls

## Clear Cart Session

> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiClearCartSession</methodName>
    <cartId></cartId>
  </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <zapiVersion></zapiVersion>
  <error></error>
  <message></message>
  <methodResponse>
    <methodName>zapiClearCartSession</methodName>
    <methodErrorCode></methodErrorCode>
    <methodErrorMessage></methodErrorMessage>
  </methodResponse>
</response>
```

## Remove Cart Session



> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiRemoveCartSession</methodName>
    <cartId></cartId>
  </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <zapiVersion></zapiVersion>
  <error></error>
  <message></message>
  <methodResponse>
    <methodName/>
    <methodErrorCode/>
    <methodErrorMessage/>
  </methodResponse>
</response>
```

Will remove the cart Id from your list of allowed sessions, and clear any order contents that you might have attached to this session Id.


## Get all Cart Sessions


> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiGetAllCartSessions</methodName>
  </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <zapiVersion></zapiVersion>
  <error></error>
  <message></message>
  <methodResponse>
    <methodName/>
    <methodErrorCode/>
    <methodErrorMessage/>
    <sessions>
      <session>
        <cartId/>
        <timeStamp/>
      </session>
    </sessions>
  </methodResponse>
</response>
```

Will return a list of all the valid cart sessions active.

## Get Cart Contents


> Request Structure

```xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
  <zapiMethod>
    <methodName>zapiGetCartContents</methodName>
    <cartId></cartId>
  </zapiMethod>
</request>
```

> Response Structure

```xml


<?xml version="1.0" encoding="UTF-8"?>
<response>
  <zapiVersion></zapiVersion>
  <error></error>
  <message></message>
   <methodResponse>
      <methodName>zapiGetCartContents</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <cart>
         <customer>
            <clientFirstName></clientFirstName>
            <clientLastName></clientLastName>
            <homePhone></homePhone>
            <homePrefix></homePrefix>
            <homeIdd></homeIdd>
            <mobilePhone></mobilePhone>
            <mobilePrefix></mobilePrefix>
            <mobileIdd></mobileIdd>
            <primAddress></primAddress>
            <primPostal></primPostal>
            <primProvince></primProvince>
            <secAddress></secAddress>
            <city></city>
            <email></email>
            <height></height>
            <weight></weight>
            <gender></gender>
            <birthDate></birthDate>
            <clientId></clientId>
            <about></about>
            <countryId></countryId>
            <loyaltyProgram></loyaltyProgram>
            <newsLetter></newsLetter>
            <customFields></customFields>
         </customer>
         <activities>
            <activity>
               <activityId></activityId>
               <activityName></activityName>
               <activityDate></activityDate>
               <activityTime></activityTime>
               <seniors></seniors>
               <adults></adults>
               <students></students>
               <children></children>
               <infants></infants>
               <totalCost></totalCost>
               <pricingOptions>
                  <pricingOption>
                     <optionId></optionId>
                     <optionName></optionName>
                     <quantity></quantity>
                  </pricingOption>
               </pricingOptions>
            </activity>
         </activities>
         <products>
            <product>
               <productId></productId>
               <productName></productName>
               <quantity></quantity>
               <price></price>
               <total></total>
            </product>
         </products>
         <cartTotals>
            <surchargeTotal></surchargeTotal>
            <packageTotal></packageTotal>
            <activityTotal></activityTotal>
            <activityTax></activityTax>
            <productTotal></productTotal>
            <productTax></productTax>
            <perPersonTax></perPersonTax>
            <total></total>
            <tax></tax>
            <giftCertificateAmountToBeApplied></giftCertificateAmountToBeApplied>
            <totalIncludingTax></totalIncludingTax>
         </cartTotals>
      </cart>
   </methodResponse>
</response>

```

## Update Notes to Cart

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiUpdateNotesToCart</methodName>
      <cartId></cartId>
      <notes></notes>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiUpdateNotesToCart</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage>Updated notes</methodErrorMessage>
   </methodResponse>
</response>

```

## Update Customer Details to Cart

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiUpdateCustomerDetailsToCart</methodName>
      <cartId></cartId>
      <firstName></firstName>
      <lastName></lastName>
      <mobileNumber></mobileNumber>
      <email></email>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiUpdateCustomerDetailsToCart</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
   </methodResponse>
</response>

```

## Add Product to Cart

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiAddProductToCart</methodName>
      <cartId></cartId>
      <productId></productId>
      <linkedPackageId></linkedPackageId>
      <linkedActivityId></linkedActivityId>
      <quantity></quantity>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAddProductToCart</methodName>
      <methodErrorCode></methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <cart></cart>
   </methodResponse>
</response>

```

This API call will simply add the requested quantity to any already existing quantities that are in the cart for the same product.

Optional parameters for linking a product to an individual package or activity are also provided.

For percentage based products, the linkage to a package or activity will be required. This will automatically determine the product price, when it’s a percentage.

**NOTES:** As part of successfully updating or adding an activity to the cart, the response will contain the updated cart contents. See the details in zapiGetCartContents for the XML details for this particular callback.

## Remove Product Cart Item

> Request Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiAddRemoveProductCartItem</methodName>
      <cartId></cartId>
      <productId></productId>
   </zapiMethod>
</request>

```

> Response Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiversion>2.0</zapiversion>
   <error>0</error>
   <message>OK</message>
   <methodresponse>
      <methodname>zapiRemoveProductCartItem</methodname>
      <methoderrorcode></methoderrorcode>
      <methodErrorMessage></methodErrorMessage>
   </methodresponse>
</response>

```

This API callback will remove the product entirely from the cart, regardless of the quantity for that product. If the same product is part of a package that is also within the cart, these will remain unaffected.

## Add Activity To Cart

> Request Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiAddActivityToCart</methodName>
      <cartId></cartId>
      <activityId></activityId>
      <activityDate></activityDate>
      <activityEndDate></activityEndDate>
      <rentalStartTime></rentalStartTime>
      <rentalEndTime></rentalEndTime>
      <pricingOptions>
         <option>
            <optionId></optionId>
            <quantity></quantity>
         </option>
      </pricingOptions>
      {PASSENGERS_NODE}
      <activityTime>
      <pickupLocationId></pickupLocationId>
      <dropOffLocationId></dropOffLocationId>
   </zapiMethod>
   <supplierConfirmationNumber></supplierConfirmationNumber>
</request>

```

> Response Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiversion>2.0</zapiversion>
   <error>0</error>
   <message>OK</message>
   <methodresponse>
      <methodname>zapiAddActivityToCart</methodname>
      <methoderrorcode>0</methoderrorcode>
      <methoderrormessage></methoderrormessage>
      <cart></cart>
   </methodresponse>
</response>

```
** NOTES:** Based on the activity type, the “activityTime”, “pickupLocationId” and “dropOffLocationId” may be required fields for adding an activity to the cart. See the appendix on activity types. In general the following rules will apply:

<br>
<br>
• Activity time required for activity type Id's 502, 503
<br>
• Pickup and drop off location Id's require for activity Id's 504
<br>
• For ALL rental activity types, the activityEndDate, rentalStartTime and rentalEndTime are required fields


**NOTES:** As part of successfully updating or adding an activity to the cart, the response will contain the updated cart contents. See the details in zapiGetCartContents for the XML details for this particular callback.

## Remove Activity Cart Item

> Request Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiRemoveActivityCartItem</methodName>
      <cartId></cartId>
      <activityId></activityId>
      <activityDate>YYYY-MM-DD</activityDate>
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiversion>2.0</zapiversion>
   <error>0</error>
   <message>OK</message>
   <methodresponse>
      <methodname>zapiRemoveActivityCartItem</methodname>
      <methoderrorcode>0</methoderrorcode>
      <methoderrormessage></methoderrormessage>
   </methodresponse>
</response>

```

## Loading Booking Into Cart

> Request Structure

```xml

<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiLoadBookingIntoCart</methodName>
      <bookingNumber></bookingNumber>
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiLoadBookingIntoCart</methodName>
      <cartId/>
      {CART_NODE}
      <currencies/>
      <methodErrorCode></methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
   </methodResponse>
</response>
```

## Process Single Transaction

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiProcessSingleTransaction</methodName>
      <cartId></cartId>
      <freeCartIdOnComplete>false</freeCartIdOnComplete>
      {TRANSACTION_DETAILS_NODE}
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiProcessSingleTransaction</methodName>
      <methodErrorCode></methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <transactionResult>
         <transactionErrorCode>0</transactionErrorCode>
         <bookingId></bookingId>
         <transactionId></transactionId>
         <transactionAmount></transactionAmount>
         <transactionMethod></ransactionMethod>
         <bookingMessage></bookingMessage>
      </transactionResult>
      {CART_NODE}
   </methodResponse>
</response>
```

**Note** This is for creating a new booking from the cart contents. If you want to add a transaction to an existing booking loaded into your cart, use zapiProcessSingleTransaction.


## Process Cart with Payment

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiProcessCartWithPayment</methodName>
      <cartId></cartId>
      <paymentMethod>
         <paymentMethodType></paymentMethodType>
      </paymentMethod>
      <paymentGatewayId>
      <creditCardDetails>
         <nameOnCard></nameOnCard>
         <number></number>
         <expMonth></expMonth>
         <expYear></expYear>
         <csv></csv>
         <cartType></cartType>
         <rawSwipeData></rawSwipeData>
         <track1Data></track1Data>
         <track2Data><track2Data>
      </creditCardDetails>
      {MOBILE_DATA_NODE}
      <voucherDetails>
         <companyName></companyName>
         <companyAgentId></companyAgentId>
         (optional)
         <companyId></companyId>
         <voucherNumber></voucherNumber>
      </voucherDetails>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiProcessCartWithPayment</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <bookingInformation>
        <bookingId></bookingId>
        <bookingMessage></bookingMessage>
      </bookingInformation>
    </methodResponse>
</response>
```

## Create Unique Cart Session

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiCreateUniqueCartSession</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiCreateUniqueCartSession</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <cartId></cartId>
      <timeStamp></timeStamp>
   </methodResponse>
</response>
```

## Promotion Code Apply

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiPromotionCodeApply</methodName>
      <promoCodeName></promoCodeName>
      <cartId></cartId>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiPromotionCodeApply</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <cartId></cartId>
      {CART NODE}
   </methodResponse>
</response>
```

## Gift Certificate Apply

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiGiftCertificateApply</methodName>
      <giftCertificate></giftCertificate>
      <cartId></cartId>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiPromotionCodeApply</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      {CART NODE}
   </methodResponse>
</response>
```

# Package Based API Calls

## Get Package Categories

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiGetPackageCategories</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetPackageCategories</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage><methodErrorMessage>
      <categories>
         <category>
            <categoryName></categoryName>
            <categoryId></categoryId>
            <numberOfPackages></numberOfPackages>
         </category>
      </categories>
   </methodResponse>
</response>
```

## Get Packages By Category Id

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiGetPackagesByCategoryId</methodName>
      <categoryId></categoryId>
   </zapiMethod>
</request>

```
**Optional Parameters:**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**verboseMode**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Values:** *true/false*
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Description:** Using this flag will curtail the amount of detail provided in the response.


> Response Structure

```xml


<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetPackagesByCategoryId</methodName>
      <methodErrorCode></methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
      <categoryId></categoryId>
      <categoryName></categoryName>
      <packages>
         <package>
            <packageId></packageId>
            <categoryId></categoryId>
            <packageName></packageName>
            <description></description>
            <packageStartDate></packageStartDate>
            <packageEndDate></packageEndDate>
            {ALLOWED GUEST TYPES NODE} {ACTIVITIES NODES} {PRODUCTS NODES}
         </package>
      </packages>
   </methodResponse>
</response>

```

## Get Package Details By Package ID

> Request Structure

```xml
**<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiGetPackageDetailsByPackageId</methodName>
      <packageId></packageId>
      <packageDate></packageDate>
   </zapiMethod>
</request>Note:** Package Date is an optional field, when provided must be in the format of YYYY-MM- DD, and is used to determine pricing for the package.
```

**Optional Parameters:**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**"verboseMode"**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Values:** *true/false*
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Description:** Using this flag will curtail the amount of detail provided in the response.

>Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetPackageDetailsByPackageId</methodName>
      <package>
         <packageId></packageId>
         <packageType></packageType>
         {PACKAGE MULTI-DAY ITINERARY NODE}
         <allowsOpenDatedActivities></allowsOpenDatedActivities>
         <enforceOpenDatesInSequencialOrder></enforceOpenDatesInSequencialOrder>
         <categoryId></categoryId>
         <packageName></packageName>
         <description></description>
         <packageStartDate></packageStartDate>
         <packageEndDate></packageEndDate>
         {ALLOWED GUEST TYPES NODE}
         {ACTIVITIES NODE}
         {PRODUCTS NODE}
      </package>
   </methodResponse>
</response>
```

## Add Package to Cart

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
  <zapiUserId></zapiUserId>
  <zapiAccountId></zapiAccountId>
  <zapiToken></zapiToken>
   <zapiMethod>
      <methodName>zapiAddPackageToCart</methodName>
      <cartId></cartId>
      <packageId/>
      {PASSENGERS_NODE}
      <activities>
         <activity>
            <activityId></activityId>
            <activityDate></activityDate>
            <activityTime></activityTime>
            <pickupLocationId></pickupLocationId>
            <pickupAddress></pickupAddress>
            <dropOffLocationId></dropOffLocationId>
            <dropoffAddress></dropoffAddress>
            <pricingOptions></pricingOptions>
         </activity>
         <activity>
            <activityId></activityId>
            <activityDate></activityDate>
            <activityTime></activityTime>
            <pricingOptions></pricingOptions>
         </activity>
      </activities>
      <products/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<request>
<zapiToken></zapiToken>
<zapiAccountId></zapiAccountId>
<zapiUserId></zapiUserId>
<zapiMethod>
  <methodName>zapiPackage_DetermineMinimumDatesToBook</methodName>
  <packageId></packageId>
  <startDate></startDate>
  <passengers>
    <seniors></seniors>
    <adults></adults>
    <students></students>
    <children></children>
    <infants></infants>
  </passengers>
  <activityStartId></activityStartId>
  <activityEndId></activityEndId>
</zapiMethod>
</request>
```

## Package_Determine Minimum Dates To Book

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAddPackageToCart</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
         {CART NODE}
   </methodResponse>
</response>
```
**Note:** Passengers, activityStartId and activityEndId are optional.

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiPackage_DetermineMinimumDatesToBook</methodName>
      <packageId></packageId>
      <startDate></startDate>
      <passengers>
         <seniors></seniors>
         <adults></adults>
         <students></students>
         <children></children>
         <infants></infants>
      </passengers>
      <activityStartId></activityStartId>
      <activityEndId>
      <isPackageBookable>
      <isBookableMinimumStartDate>
      <activities>
         <activity>
            <activityName>
            <activityId>
            <activityType>
            <activityTypeAsString>
            <isBookable>
            <activityDate>
            <activityTimes>
               <activityTime>
                  <isBookable>
                  <isBookableMessage>
                  <spotsRemaining>
                  <numberOnStandby>
                  <isStandbyAvailable>
               </activityTime>
            </activityTimes>
            <isAvailable>
            <isBookableDate>
         </activity>
      </activities>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage></methodErrorMessage>
   </methodResponse>
</response>
```

## Package_Set Activity Component Date  

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiPackage_SetActivityComponentDate</methodName>
      <cartId/> (OPTIONAL)
      <bookingId/> (OPTIONAL)
      <addToStandBy/> (OPTIONAL – default false)
      <packageId/>
      <activityId/>
      <activityDate/>
      <activityTime/>
      <pickupId/> (OPTIONAL)
      <dropoffId/> (OPTIONAL)
   </zapiMethod>
</request>
```

**Notes:**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Either cart Id or booking Id are required
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Supplied the addToStandBy with check first at the activity is configured for standby, and that the activity is sold out, and spots are available for standby (auto promotion could apply)


> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiPackage_SetActivityComponentDate</methodName>
      <packageId/>
      <activityId/>
      <activityDate/>
      {CART_NODE}
   </methodResponse>
</response>
```

## Package_Retrieve Pricing Details

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiPackage_RetrievePricingDetails</methodName>
      <packageId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   {PACKAGE MULTI DAY ITINERARY NODE}
</response>
```
# Activity Based API Calls

## Get Activity And Product Catalog

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetActivityAndProductCatalog</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
     <methodName>zapiGetActivityAndProductCatalog</methodName>
     <activities>
        <activity>
           <categoryId/>
           <categoryName/>
           <activityId/>
           <activityName/>
        </activity>
     </activities>
     <products>
        <product>
           <productId/>
           <prodcutName/>
        </product>
     </products>
   </methodResponse>
</response>
```

## Get Activity Categories

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGetActivityCategories</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>ZAPI Ok</message>
   <methodResponse>
      <methodName>zapiGetActivityCategories</methodName>
      <categories>
         <category>
            <categoryId/>
            <categoryName/>
            <numberOfActivities/>
            <activities>
               <activity>
                  <activityId/>
                  <activityType/>
                  <activityName/>
                  <activityTimes>
                     <activityTime>
                        <activityStartTime/>
                        <activityTimeCancelled/>
                     </activityTime>
                  </activityTimes>
               </activity>
            </activities>
         </category>
      </categories>
   </methodResponse>
</response>
```


## Get Activities By Category Id

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGetActivitiesByCategoryId</methodName>
      <categoryId/>
   </zapiMethod>
</request>
```

**Optional Parameters:**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**<verboseMode>**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Values:** *true/false*
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Description:** Using this flag will curtail the amount of detail provided in the response.

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetActivitiesByCategoryId</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <categoryId/>
      <categoryName/>
      <imageUrl/>
      <description/>
      <activities>
         <activity>
            <activityId/>
            <activityName/>
            <hasBookings/>
            <childrenActivities/>
         </activity>
      </activities>
   </methodResponse>
</response>
```

## Get All Activities By Name

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetAllActivitiesByName</methodName>
      <activityNameToSearch/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetAllMerchandiseByName</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <activities>
         <activity>
            <activityId/>
            <activityName/>
            <activityTypeId/>
            <image/>
            <duration/>
            <categoryId/>
            <categoryName/>
         </activity>
      </activities>
   </methodResponse>
</response>
```

## Get All Activities By Date

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetAllActivitiesByDate</methodName>
      <activityDate>YYYY-MM-DD</activityDate>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetAllActivitiesByDate</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <activityCategories>
         <activityCategory>
            <categoryName/>
            <categoryId/>
            <activities>
               <activity>
                  <activityName/>
                  <activityId/>
               </activity>
            </activities>
         </activityCategory>
      </activityCategories>
   </methodResponse>
</response>
```

## Get Activity Details By Activity ID

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetActivityDetailsByActivityId</methodName>
      <activityId/>
      <activityDate>YYYY-MM-DD</activityDate>
      (Optional)
   </zapiMethod>
</request>
```
**Optional Parameters:**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**<verboseMode>**
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Values:** *true/false*
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**Description:** Using this flag will curtail the amount of detail provided in the response.

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetActivityDetailsByActivityId</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <activity>
         <categoryName>Fall Sightseeing</categoryName>
         <categoryId/>
         <activityName/>
         <activityId/>
         <activityTypeId/>
         <activityTypeAsString/>
         <activityThreshold/>
         <activityMaxThreshold/>
         <operatedByCompanyId/>
         <operatedByCompanyName/>
         <supplierConfirmationNumberSystemManaged/>
         <supplierConfirmationNumberDisplayed/>
         <description/>
         <imageUrl/>
         <isFreeSell/>
         <ticketExpiry/>
         <ticketPrinterText/>
        {ACTIVITY TIMES NODE}
        {DAYS OF WEEK NODE}
        {PICKUP LOCATIONS NODE}
        {DROP OFF LOCATIONS NODE}
        {BUSINESS HOURS NODE}
         <pricingOptions>
            <option>
               <name/>
               <optionId/>
               <price/>
            </option>
         </pricingOptions>
         <duration/>
         {ALLOWED GUEST TYPES NODE}
      </activity>
      <sharedInventoryDetails>
         <isParent>true/false</isParent>
         <childrenActivities>
            <childActivity>
               <activity/>
               //This is an entire XML node for a single activity
            </childActivity>
         </childrenActivities>
      </sharedInventoryDetails>
   </methodResponse>
</response>
```


**NOTE:** systemType – indicate the system mapping for the passenger type to Senior, Adult, Student, Child and Infant
<br>
The API will return one of the following **activityTypeId (see the table Activity Type Id's appendix):**
<br>
500, 501, 502, 503 or 504
<br>
<br>
For each of these activity type id's optional additional information will be returned in the XML response. These are outlined here:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Each type will return the **activityTimes** XML element. ONLY 502 and 503 will have variable times. 500, 501, 504 will be single times
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• 504 will return additional **pickupLocations** and **dropOffLocations** XML elements
The API call to have an activity added to the cart **zapiAddActivityToCart** will then require these optional
values to be passed as part of the request, depending on the **activityTypeId**.

## Check Activity Inventory By Date

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiCheckActivityInventoryByDate</methodName>
      <activityId/>
      <activityDate>YYYY-MM-DD</activityDate>
      <activityTime>HH:MM:SS</activityTime>
      <pickupLocationId/>
      (required or shuttles)
      <dropoffLocationId/>
      (required or shuttles)s
      <requestedPassengers>
         <seniors/>
         <adults/>
         <students/>
         <children/>
         <infants/>
      </requestedPassengers>
      <pricingOptions>
         <option>
            <optionId/>
            <quantity/>
         </option>
      </pricingOptions>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion/>
   <error/>
   <message/>
   <methodResponse>
      <methodName>zapiCheckActivityInventoryByDate</methodName>
      <activityId/>
      <activityDate/>
      <activityName/>
      <activityType/>
      <totalRequestedPassengers/>
      <activityTimes>
         <activityTime>
            <activityTimeStart/>
            <activityTimeAvailable/>
            <activityTimeAvailableMessage/>
            <inventoryCheckCode/>
            <inventoryCheckMessage/>
            <activityTimeSpotsRemaining/>
         </activityTime>
      </activityTimes>
   </methodResponse>
</response>
```

**Notes:**

Activity date, activity time and requested passengers are optional parameters.

Activity date – if left blank, the current date will be used

Activity Time – if left blank, the call will return details for each activity time configured for the activity/activity date. If you provide an activity time, then details for only the requested time slot will be returned.

Requested Passengers – if left blank, this will be treated as 0. If you provide them, then inventories will be compared and filtered based on the requested passengers.

## Price Quote (Rentals Only)

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiMethod>
      <methodName>zapiPriceQuote</methodName>
      <activityId/>
      <activityDate/>
      <activityTime/>
      <activityEndDate/>
      <rentalStartTime/>
      <rentalEndTime/>
      {PASSENGERS_NODE}
      <pricingOptions>
         <option>
            <optionId/>
            <quantity/>
         </option>
      </pricingOptions>
      <pickupLocationId/>
      <dropOffLocationId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiPriceQuote</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Get Activity Cancellations

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiActivity_GetCancellations</methodName>
      <activityId/>
      <cancellationStartDate/>
      <cancellationEndDate/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiActivity_GetCancellations</methodName>
      <cancellations>
         <cancellation>
            <cancellationId/>
            <activityId/>
            <activityName/>
            <cancellationStartDate/>
            <cancellationEndDate/>
            <cancelltionStartTime/>
            <cancellationEndTime/>
            <daysOfWeek>
               <sunday/>
               <monday/>
               <tuesday/>
               <wednesday/>
               <thursday/>
               <friday/>
               <saturday/>
            </daysOfWeek>
         </cancellation>
      </cancellations>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Create Activity Cancellation

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiActivity_CreateCancellation</methodName>
      <activityId/>
      <cancellationStartDate/>
      <cancellationEndDate/>
      <cancellationStartTime/>
      <cancellationEndTime/>
      <daysOfWeek>
         <sunday/>
         <monday/>
         <tuesday/>
         <wednesday/>
         <thursday/>
         <friday/>
         <saturday/>
      </daysOfWeek>
      <flags>
         <canceledOnlineOnly/>
         <cancelWithBookings/>
         <skipDaysWithBookings/>
      </flags>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiActivity_CreateCancellation</methodName>
      <cancellations>
         <cancellation>
            <cancellationId/>
            <activityId/>
            <activityName/>
            <cancellationStartDate/>
            <cancellationEndDate/>
            <cancelltionStartTime/>
            <cancellationEndTime/>
            <daysOfWeek>
               <sunday/>
               <monday/>
               <tuesday/>
               <wednesday/>
               <thursday/>
               <friday/>
               <saturday/>
            </daysOfWeek>
         </cancellation>
      </cancellations>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Remove Activity Cancellation

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiActivity_RemoveCancellation</methodName>
      <cancellationId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiActivity_RemoveCancellation</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

# Merchandise/Product Base API Calls

## Get Merchandise Categories  

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGetMerchandiseCategories</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>ZAPI Ok</message>
   <methodResponse>
      <methodName>zapiGetMerchandiseCategories</methodName>
      <categories>
         <category>
            <categoryId/>
            <categoryName/>
            <categoryDescription/>
         </category>
      </categories>
   </methodResponse>
</response>
```

| Element | M/O/C | Format | Length | Details |
| ------- | ----- | ------ | ------ | ------- |
| Response | M | a-z A-Z || Top Level Element |
| Zapi Version | M | 0-9 | 5 ||
| Error | M | 0-9 | 2 ||
| Message | M | a-z A-Z 0-9 | Variable | Error Message Details |
| Method Response | M ||||
| Method Name | M | a-z A-Z 0-9 | Variable | See Documentation for method options |
| Items | M | Element | Variable ||
| Item | M | Element | Variable ||
| Category ID | M | 0-9 || Unique ID for category |
| Category Name | M | a-z A-Z 0-9 || Category Name |
| Category Description | M | a-z A-Z 0-9 | Variable | Category Description |

## Get Merchandise by Category ID


> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGetMerchandiseByCategoryId</methodName>
      <categoryId/>
   </zapiMethod>
</request>
```

| Element | M/O/C | Format | Length | Details |
| ------- | ----- | ------ | ------ | ------- |
| Request | M | a-z A-Z | 7 | Top level element |
| ZapiToken | M | a-z A-Z 0-9 | 40 | The generated ZAPI token |
| ZapiUserID | M | 0-9 | 2 | Supplied user ID.|
| ZapiMethod | M ||| All requests must have a method |
| MethodName | M | a-z A-Z 0-9 | Variable | See documentation for method options |
| CategoryID | M | 0-9 |||

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>ZAPI Ok</message>
   <methodResponse>
      <methodName>zapiGetMerchandiseByCategoryId</methodName>
      <products>
         <product>
            <productId/>
            <productName/>
            <productDescription/>
            <pricePreTax/>
            <priceWithTax/>
         </product>
      </products>
   </methodResponse>
</response>
```

| Element | M/O/C | Format | Length | Details |
| ------- | ----- | ------ | ------ | ------- |
| Response | M | a-z A-Z || Top Level Element |
| Zapi Version | M | 0-9 | 5 ||
| Error | M | 0-9 | 2 ||
| Message | M | a-z A-Z 0-9 | Variable | Error Message Details |
| Method Response | M ||||
| Method Name | M | a-z A-Z 0-9 | Variable | See Documentation for method options |
| Items | M | Element | Variable ||
| Item | M | Element | Variable ||
| Product ID | M | 0-9 || Unique ID for the product |
| Product Name | M | a-z A-Z 0-9 || Product Name |
| Product Description | M | a-z A-Z 0-9 | Variable | Product Description |
| Price Pre Tax | M | 0-9.0-9 0-9 | Float | Price of product pre-tax (based on qty of 1) |
| Price With Tax | M | 0-9.0-9 0-9 | Float | Price of product with taxes (based on qty of 1) |

## Get All Merchandise By Name

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetAllMerchandiseByName</methodName>
      <productNameToSearch/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetAllMerchandiseByName</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <products>
         <product>
            <productId/>
            <image/>
            <listPrice/>
            <categoryId/>
            <categoryName/>
         </product>
         <product>
            <productId/>
            <image/>
            <listPrice/>
            <categoryId/>
            <categoryName/>
         </product>
      </products>
   </methodResponse>
</response>
```

## Get Product Details By Product ID

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetProductDetailsByProductId</methodName>
      <productId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetProductDetailsByProductId</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <product>
         <categoryName/>
         <categoryId/>
         <productName/>
         <productId/>
         <description/>
         <imageUrl/>
         <inventory/>
         <listPrice/>
      </product>
   </methodResponse>
</response>
```

## Check Product Inventory

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiCheckProductInventory</methodName>
      <productId/>
      <quantity/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiCheckProductInventory</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <productId/>
      <productName/>
      <totalRequested/>
      <inventoryRemaining/>
      <inventoryCheckCode/>
      <inventoryCheckMessage/>
   </methodResponse>
</response>
```

## Set Product Quantity

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiSetProductQuantity</methodName>
      <cartId/>
      <productId/>
      <quantity/>
   </zapiMethod>
</request>
```

> Response Structure  

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiSetProductQuantity</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

# Waitlist API Calls

## Add Waitlist Guest

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiAddWaitListGuest</methodName>
      <activityId/>
      <activityDate/>
      <activityTime/>
      <firstName/>
      <lastName/>
      <mobilePhone/>
      <email/>
      <comments/>
      {PASSENGERS_NODE}
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAddWaitListGuest</methodName>
      <waitListId/>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Remove Waitlist Guest

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiRemoveWaitListGuest</methodName>
      <waitListId/>
      <activityId/>
      <activityDate/>
      <activityTime/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiRemoveWaitListGuest</methodName>
      <waitListId/>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Convert Waitlist Guest to Cart

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiConvertWaitListGuestToCart</methodName>
      <waitListId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiConvertWaitListGuestToCart</methodName>
      <waitListId/>
      <cartId/>
      {CART_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Get All Waitlist Guests By Activity ID and Date

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetAllWaitListGuestsByActivityIdAndDate</methodName>
      <activityId/>
      <activityDate/>
      <activityTime/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetAllWaitListGuestsByActivityIdAndDate</methodName>
      <activityId/>
      <activityDate/>
      {WAITLIST_NODE}
      <totalGuestsOnWaitList/>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage><![CDATA[ ]]><methodErrorMessage/>
   </methodResponse>
</response>
```

# Agent Specific Calls

## Agents_Authenticate

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiAgents_Authenticate</methodName>
      <username/>
      <password/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAgents_Authenticate</methodName>
      {AGENT_DETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

Please note that this routine simply authenticates that the agent is part of your system. The system will return a success or failure, along with both the agent ID and the agent hash key. These can then be used later to add items to the cart session of packages, activities and products.


## Agent Login

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUsername/>
   <zapiPassword/>
   <zapiMethod>
      <methodName>zapiAgentLogin</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion/>
   <error/>
   <message/>
   <methodResponse>
      <methodName>zapiMobileLogin</methodName>
      <methodErrorCode/>
      <methodErrorMessage/>
      <zapiUsername/>
      <zapiAccountId/>
      <zapiUserId/>
      <firstName/>
      <lastName/>
      <zapiApiToken/>
      <cartId/>
   </methodResponse>
</response>
```

Please note – this routine is intended to be use, when you wish to have the system create and issue a new API Token, API User ID and API Account ID. This routine authenticates first that the agent is a active agent in your system (based on the expiry date of their account).

This call will return the API token, API User ID and API Account ID, which can then be used on subsequent calls.

## Get Agents Profile

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiAgents_GetProfile</methodName>
      <agentID/>
      <agentHashKey/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAgents_ GetProfile</methodName>
      {AGENTS_DETAIL_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Update Agents Profile

Please note that when updating a user account, the user ID will remain the same, but the hash key can change based on the data that has been requested to be updated.

## Update Agents Username

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiAgents_UpdateUsername</methodName>
      <agentID/>
      <agentHashKey/>
      <username/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAgents_UpdateUsername</methodName>
      {AGENTS_DETAIL_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Update Agents Password

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiAgents_UpdatePassword</methodName>
      <agentID/>
      <agentHashKey/>
      <username/>
      <password/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAgents_UpdatePassword</methodName>
      {AGENTS_DETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Get All Agents Companies

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiAgents_GetAllCompanies</methodName>
   </zapiMethod>
</request>
```

> Response Structure

```xml


<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiAgents_GetAllCompanies</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <companies>
         <company>
            <companyName/>
            <companyId/>
            <companyType/>
         </company>
      </companies>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

# Guest Specific Calls

## Guests Authenticate

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_Authenticate</methodName>
      <username/>
      <password/>
      <bookingId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_Authenticate</methodName>
      {GUEST_DETAILS_NODE}
   </zapiMethod>
</request>
```

## Get Guests Profile

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_GetProfile</methodName>
      <guestID/>
      <guestHashKey/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_GetGuestID</methodName>
      {GUEST_DETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

Zaui treats a guest as unique based on 4 pieces of information: first name, last name, mobile number and email address.

## Guest Lookup

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_Lookup</methodName>
      <firstName/>
      <lastName/>
      <mobilePhone/>
      <email/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_ Lookup</methodName>
      {GUEST_DETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```
Zaui treats a guest as unique based on 4 pieces of information: first name, last name, mobile number and email address.

## Update Guests Profile

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGuests_UpdateProfile</methodName>
      <guestID/>
      <guestHashKey/>
      <firstName/>
      <lastName/>
      <mobilePhone/>
      <email/>
      <birthDate/>
      <gender/>
      <addressLine1/>
      <addressLine2/>
      <country/>
      <city/>
      <state/>
      <zipCode/>
      <userCustomFields>
         <userCustomField>
            <customFieldId/>
            <customFieldValue/>
         </userCustomField>
      </userCustomFields>
   </zapiMethod>
</request>
```


**Note** – all fields are optional with the following exceptions:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• guestID
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• guestHashKey
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• firstName
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• lastName
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• mobilePhone
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• email
<br>
<br>
Gender – valid settings are ‘F’ or ‘M’ or blank.
Country – since this is a string value, we will attempt to match this against the user defined list of countries. If it’s not found a new entry will be created, and this new ID used.


> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_UpdateProfile</methodName>
      <guestDetails>
         <guestID/>
         <guestHashKey/>
         <accountId>&gt;</accountId>
         <expiryDate/>
         <username/>
         <firstName/>
         <lastName/>
         <mobilePhone/>
         <email/>
         <addressLine1/>
         <addressLine2/>
         <city/>
         <state/>
         <zipCode/>
         <birthDate/>
         <dateCreated/>
         {CUSTOM FIELDS NODE} {RELATED BOOKINGS NODE}
      </guestDetails>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

**Note** - When updating a user account, the ID will remain the same, but the hash key can change based on the data that has been requested to be updated.

## Update Guests Username

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_UpdateUsername</methodName>
      <guestID/>
      <guestHashKey/>
      <username/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_UpdateUsername</methodName>
      {GUEST_DETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Update Guests Password

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiToken/>
   <zapiAccountId/>
   <zapiUserId/>
   <zapiMethod>
      <methodName>zapiGuests_UpdatePassword</methodName>
      <guestID/>
      <guestHashKey/>
      <username/>
      <password/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_UpdatePassword</methodName>
      {GUESTDETAILS_NODE}
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Get Guests Booking Details

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGuests_GetBookingDetails</methodName>
      <guestID/>
      <guestHashKey/>
      <bookingNumber/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGuests_GetBookingDetails</methodName>
      {SINGLE BOOKING DETAILS NODE}
      <methodErrorCode/>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

# Searching API Calls

## Search Bookings by Last Name

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiSearchBookingsByLastname</methodName>
      <lastName/>
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiSearchBookingsByLastname</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <allBookings>{BOOKING SEARCH RESULT NODE}</allBookings>
   </methodResponse>
</response>
```

## Search Booking by Booking Number

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiSearchBookingsByBookingNumber</methodName>
      <bookingNumber/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiSearchBookingsByBookingNumber</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      {BOOKING SEARCH RESULT NODE}
   </methodResponse>
</response>
```

## Search Bookings by Mobile Number

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiSearchBookingsByMobileNumber</methodName>
      <mobileNumber/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiSearchBookingsByMobileNumber</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <allBookings>{BOOKING SEARCH RESULT NODE}</allBookings>
   </methodResponse>
</response>
```

# Manifest API Calls

## Get Manifest Entire Day by Date

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetManifestEntireDayByDate</methodName>
      <cartId/>
      <date>YYYY-MM-DD</date>
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetManifestEntireDayByDate</methodName>
      <manifestDate>YYYY-MM-DD</manifestDate>
      <totalGuests/>
      <totalGuestsCheckedIn/>
      <activities>
         <activity>
            <activityId/>
            <activityName/>
            <availability/>
            <capacity/>
            <allBookings>
               <booking>
                  <bookingNumber/>
                  <bookingAttributeId/>
                  <supplierConfirmationNumber/>
                  <hasWaiverSigned/>
                  <activityTime/>
                  <rentalStartTime/>
                  <rentalEndTime/>
                  <notes/>
                  <clientId/>
                  <guestFirstName/>
                  <guestLastName/>
                  <mobile/>
                  <email/>
                  <outstandingBalance/>
                  <checkedInStatus/>
                  <pickupLocation/>
                  <pickupTime/>
                  <dropoffLocation/>
                  <passengersAsString/>
               </booking>
            </allBookings>
         </activity>
      </activities>
   </methodResponse>
</response>
```

## Get Manifest Individuals By Activity ID and Date

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiGetManifestIndividualByActivityIdAndDate</methodName>
      <cartId/>
      <activityId/>
      <date/>
      <activityTime/>
   </zapiMethod>
</request>
```

**NOTE:** Activity time here is optional. If provided, then the API callback will return data matching the specific activity time slot you have requested.

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiGetManifestIndividualByActivityIdAndDate</methodName>
      <activity>
         <activityId/>
         <activityName/>
         <availability/>
         <capacity/>
         <allBookings>
            <booking>
               <bookingNumber/>
               <attributeId/>
               <activityTime/>
               <rentalStartTime/>
               <rentalEndTime/>
               <guestFirstName/>
               <guestLastName/>
               {PASSENGERSLIST_NODE}
            </booking>
         </allBookings>
         {WAITLIST_NODE}
      </activity>
   </methodResponse>
</response>
```

# General Booking/ Reservation Based API Calls

## Email Booking Itinerary

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiEmailBookingItinerary</methodName>
      <bookingNumber/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiEmailBookingItinerary</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```


## Check-In

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiCheckIn</methodName>
      <cartId/>
      <bookingNumber/>
      <checkInType/>
      <activityId/>
      <activityDate>YYYY-MM-DD</activityDate>
      <productId/>
      <productDate>YYYY-MM-DD</productDate>
      <toggleStatus>true/false</toggleStatus>
   </zapiMethod>
</request>
```

**Note:** Check in Type is of either A or P – activity or product.

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiCheckIn</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage>Checked In</methodErrorMessage>
      <bookingBalance>
         <hasOutstandingBalance/>
         <balance/>
         <balanceFormated/>
      </bookingBalance>
   </methodResponse>
</response>
```

## Set Waiver Signed Value

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiSetWaiverSignedValue</methodName>
      <bookingId/>
      <clientId/>
      <activityId/>
      <activityDate/>
      <activityTime/>
      <waiverValue>false</waiverValue>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiSetWaiverSignedValue</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
   </methodResponse>
</response>
```

## Update Reservation Activity Component

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiUpdateReservationActivityComponent</methodName>
      <bookingId/>
      <clientId/>
      <bookingNumber/>
      <sourceAttributeId/>
      <destinationActivityId/>
      <destinationActivityDate/>
      <destinationActivityTime/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiUpdateReservationActivityComponent</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <bookingBalance>
         <hasOutstandingBalance/>
         <balance/>
         <balanceFormated/>
      </bookingBalance>
   </methodResponse>
</response>
```

## Batch Availability

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiBatchAvailability</methodName>
      <activityId/>
      <activityStartDate/>
      <activityEndDate/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiBatchAvailability</methodName>
      <activities>
         <activity>
            <activityName/>
            <activityId/>
            <batchAvailability>
               <dates>
                  <date>
                     <activityDate/>
                     <availability>{ACTIVITY TIME NODE}</availability>
                  </date>
               </dates>
            </batchAvailability>
         </activity>
      </activities>
   </methodResponse>
</response>
```

This callback will allow checking bulk or batch availability for a single activity, across many days. This callback does have the following restrictions:
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Dates must be greater then or equal to the current system date
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• The end date must be greater then or equal to the start date
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• If the start date is less then the current system date, it will be reset to the current date
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Proper validation of the date formats in YYYY-MM-DD formats
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• The difference in start to end date can not exceed 31 days
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• The end date can not exceed 31 days from the current date
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• The activity must be available on the API

## Bookings Cancel Booking

Note, that this API call will cancel the booking, even if there is an outstanding balance on the booking. If you attempting to balance the booking transactions, then you must submit the appropriate transactions on the booking to reconcile it.

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiBookings_CancelBooking</methodName>
      <bookingNumber/>
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.1</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiBookings_CancelBooking</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage/>
      <bookingNumber/>
      <bookingBalance>
         <hasOutstandingBalance/>
         <balance/>
         <balanceFormated/>
      </bookingBalance>
   </methodResponse>
</response>
```

# Zaui Mobile SPecific API Calls

## Mobile Login

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUsername/>
   <zapiPassword/>
   <zapiMethod>
      <methodName>zapiMobileLogin</methodName>
      {MOBILE_DATA_NODE}
   </zapiMethod>
</request>

```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion/>
   <error/>
   <message/>
   <methodResponse>
      <methodName>zapiMobileLogin</methodName>
      <zapiToken/>
      <zapiAccountId/>
      <zapiUserId/>
      <zapiAccountType/>
      <cartId/>
   </methodResponse>
</response>
```

## Logout

> Request Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<request>
   <zapiUserId/>
   <zapiAccountId/>
   <zapiToken/>
   <zapiMethod>
      <methodName>zapiLogout</methodName>
      <cartId/>
   </zapiMethod>
</request>
```

> Response Structure

```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <zapiVersion>2.0</zapiVersion>
   <error>0</error>
   <message>OK</message>
   <methodResponse>
      <methodName>zapiLogout</methodName>
      <methodErrorCode>0</methodErrorCode>
      <methodErrorMessage>Logout Successful</methodErrorMessage>
   </methodResponse>
</response>
```

# Appendix

## Package Types

Where you will find indication of a package type, is typically on any specific call where a detailed description of the package will be returned as part of the XML. Examples of this would be:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• zapiGetPackageDetailsByPackageId
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o Data field: packageType
<br>
There will be other calls using the same field. When the packageType is a type 1, meaning a multi day itinerary styled package, an additional XML node for the packageMultiDayItinerary will be added.

| Package Type ID | Notes/Comments |
| --------------- | -------------- |
| 0 | This type of package describes any packages |
| 1 | All packages that are configured as a multi-day itinerary based package. The addition packageMultiDayItineary XML node will be provided. |

## Activity Type ID's

| Activity Type ID | Message | API Notes/Comments |
| ---------------- | ------- | ------------------ |
| 500 | Regular | Activity Date – single <br> Activity Times – single time |
| 501 | Custom | Activity Date – single <br> Activity Times – single time |
| 502 | Third-Party | Activity Date – single <br> Activity Times – 1-n (variable) |
| 503 | Interval | Activity Date – single <br> Activity Times – 1-n (variable) |
| 504 | Shuttle | Activity Date – single <br> Activity Times – 1-n (variable) ; Pickup Locations and Drop Off Locations 1-n (variable) |
| 505 | Rental | Activity Date – multi <br> Start Time – single <br> End Time - single |

## Product Type ID's

| Product Type ID | Notes/Comments |
| --------------- | -------------- |
| 1 | This type of product describes products with “flat” rate pricing |
|2 | This type of product describes products with “percentage” based pricing, where the price of the product is generated based on a percentage of the overall total of a reservation. |

## Zapi Error Codes

| Error Code | Message | Details |
| ---------- | ------- | ------- |
| 0 | ZAPI OK | No error detected |
| 1 | ZAPI_VALIDATION_ERROR | Check the Token, user ID and account ID |
| 2 | ZAPI_RESPONSE_LIMIT_EXCEEDED | The threshold on number of API requests per minute has been exceed. |
| 3 | ZAPI_INVALID_XML | XML Document is not valid. |

## Zapi Payment Method Types

| Payment Type ID | Payment Type |
| --------------- | ------------ |
| 2000 | Credit Card Sale |
| 2002 | Cash Sale |
| 2003 | Override pay later |
| 2004 | Invoice/Voucher transaction – addition transaction details will be required |
| 2005 | Travellers Cheque |
| 2006 | Cheque |
| 2016 | User Defined |
| 2018 | Debit |
| 2020 | User Defined |
| 2023 | Deposit as commission |
| 2027 | User Defined |
| 2029 | User Defined |
| 2031 | User Defined |
| 2033 | User Defined |

## Zapi Method Error Codes

| Method Error Code | Message | Details |
| ----------------- | ------- | ------- |
| 20 | ZAPI_FILTER_ERROR | Invalid data type being passed as parameter for ZAPI method call. |
| 40 | ZAPI_MERCHANDISE_ERROR_SOLDOUT | Indicates that the requested merchandise qty level is not
available. |
| 41 | ZAPI_MERCHANDISE_ERROR_NOINVENTORY | Not enough inventory for request |
| 42 | ZAPI_MERCHANDISE_ERROR_NOTPUBLISHED | Not available for online/remote purchase |
| 43 | ZAPI_MERCHANDISE_ERROR_NODATA | No data for request to return. |
| 50 | ZAPI_ACTIVITY_ERROR_SOLDOUT | Activity is not available for the requested amount |
| 51 | ZAPI_ACTIVITY_ERROR_DATE | Wrong date format or invalid date |
| 52 | ZAPI_ACTIVITY_ERROR_NOTPUBLISHED | Not available for online/remote purchase |
| 53 | ZAPI_ACTIVITY_ERROR_NODATA | No data for request to return. |
| 70 | ZAPI_RESERVATIONS_ERROR_INVALID_USER | User doesn't have permission for requested method action |
| 71 | ZAPI_RESERVATIONS_ERROR_INACTIVE | Reservation has already been canceled and reversed. |
| 99 | ZAPI_GENERAL_ERROR | General error code reserved for aggregation of non-specific errors. |
| 100 | ZAPI_TRANSACTION_TYPE_NOTVALID | Transaction type not valid. |



# Legal

The Zaui Web-Hook and Remote Target API (the “API”) is owned and operated by Zaui Software. If you use the API, you will be able to access data from any partner Supplier within the Zaui system. Listed below are the terms and conditions of use (the “Terms”) for this API. By using, accessing and/or viewing information on the API, you agree to be bound by these Terms. If you violate these Terms, Zaui Software has the right to terminate your use of the API and/or take appropriate legal actions against you. We reserve the right to change these Terms at any time without notice.

## Acceptance of Terms

In order to use the API you must agree to these Terms. You represent that you have the full power, capacity and authority to accept these Terms. If you are accepting on behalf of a business entity, you represent that you have the full legal authority to bind the business entity to these Terms. These terms are in addition to the standard Zaui Software Terms of Service.

## Permitted Use

You may access, view and make copies of the data in the API for your personal or commercial use. Due to the special features of API, by accessing and viewing information from API you agree to be bound by these special terms:

1. You will not modify the data from API in any way
2. You will not modify the link structure to API

### Subject to these Terms, Zaui Software gives you a personal, worldwide, non-assignable and non-exclusive license to the API.

## Restrictions

You may not:

1. Display the API in any manner that implies a relationship or affiliation with, sponsorship, or endorsement by Zaui or that can be reasonably interpret to suggest content represents the views or opinions of Zaui.
2. Use the API to disparage Zaui or its products, partners or product suppliers.
3. Use the API on your website if the website promotes illegal activity, contains pornography, gambling, or the sale of tobacco or alcohol to individuals under the age of legal consumption.
4. Delete or alter any trade names, trademarks, service marks, logos, domain names or other distinctive brand features of Zaui that are included in the API in applications or programs that you create.
5. Reverse engineer, decompile or otherwise attempt to extract the source code of the API or any part thereof, unless this is expressly permitted or required by applicable law.
6. Access, tamper with, or use non-public areas of the Services, Zaui computer systems, or the technical delivery systems of Zaui providers; (ii) probe, scan, or test the vulnerability of any system or network or breach or circumvent any security or authentication measures.
7. Access or search or attempt to access or search the Services by any means (automated or otherwise) other than through our currently available, published interfaces that are provided by Zaui, unless you have been specifically allowed to do so in a separate agreement with Zaui.
8. Forge any TCP/IP packet header or any part of the header information in any email or posting, or in any way use the Services to send altered, deceptive or false source-identifying information.
9. Interfere with, or disrupt, (or attempt to do so), the access of any user, host or network, including, without limitation, sending a virus, overloading, flooding, spamming, mail-bombing the Services, or by scripting the creation of Content in such a manner as to interfere with or create an undue burden on the Services.

## Rate Limits and Monitoring

Your use of the Zaui Web API and Zaui Content are subject to certain limitations on access, calls, and use as determined by Zaui, at its sole discretion. If Zaui believes that you have attempted to exceed or circumvent these limitations, your ability to use the Zaui Web API and ZContent may be temporarily or permanently blocked. Zaui may monitor your use of the Zaui API to improve the Zaui service and to ensure your compliance with these Terms.

## Ownership/Trademarks

You do not acquire or have any ownership, license or other proprietary interest in the API. You understand that the API is protected by copyrights, trademarks, service marks, patents and other proprietary rights and laws.

## Privacy Policy

The use of personal information is governed by our <a href="https://www.zaui.com/privacy" target="_blank"_>Privacy Policy</a> and the <a href="https://www.zaui.com/terms-of-service/" target="_blank"_>Zaui Terms of Service</a>.

## Limitation of Liability

Zaui assumes no responsibility for, and shall not be liable for, any damages or expenses you may incur as a result of any inaccuracy, incompleteness or obsolescence of anything contained in the API. THE SERVICES OF THE API ARE PROVIDED “AS IS”, WITH NO WARRANTIES WHATSOEVER. Without limiting the generality of the forgoing, you agree that neither Zaui nor any of its affiliates, employees or agents will be liable to you or to any other party for any direct or indirect damages, or for any special, exemplary, punitive, incidental, consequential or other damages (including, but not limited to, lost profits or lost time), whether based on contract, tort, strict liability or otherwise, which arise out of or are in any way connected with any access to the API or any viewing or use of any information on the API. You acknowledge that the limitations in this Section are reasonable and appropriate. Zaui DISCLAIMS ALL WARRANTIES REGARDING THE ACCURACY, COMPLETENESS, CURRENCY OR RELIABILITY OF THE DATA IN THE API, INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT OR OTHERWISE ARISING BY LAW OR STATUTE. YOU AGREE THAT YOUR USE OF, OR RELIANCE UPON, ALL DATA OBTAINED THROUGH THE API IS AT YOUR OWN DISCRETION AND RISK.

## Unauthorized Use/No Interference

You agree that you will not use or attempt to use any method, device, software or routine to harm others or interfere with functioning of the API or use and/or monitor any information in or related to the API for any unauthorized purpose.

By using the API in applications or programs you create, you agree to be solely liable for any damage resulting from any infringement of copyrights, proprietary rights, or any other harm (including but not limited to harm caused by spyware, malware, worms, Trojan horses and viruses) resulting from such application or program.

## Indemnification

You agree to indemnify and to hold Zaui, its subsidiaries, affiliates, business partners, officers, employers and other agents, harmless from and against any loss, liability, damage or expense (including reasonable attorneys fees) arising out of your use of the API, including, without limitation, any violations by you of these Terms.

## Termination

Without limiting its other remedies, Zaui may immediately discontinue, suspend, terminate or block your and any user’s use of the API at any time in its sole discretion. You may terminate this agreement by ceasing to use the API or any product incorporating it.

Zaui may in its sole discretion choose to upgrade the current version of the API at any time without notice to you, which may make the version of the API that you are using obsolete.

## Accuracy of Information

ALL INFORMATION IN THE API IS PROVIDED TO YOU ON AN “AS-IS” BASIS. ZAUI SOFTWARE DISCLAIMS ALL WARRANTIES REGARDING THE ACCURACY, COMPLETENESS, CURRENCY OR RELIABILITY OF ANY INFORMATION IN THE API, INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT OR OTHERWISE ARISING BY LAW OR STATUTE.

## Transmission Failures

Zaui will use commercially reasonable efforts to publish and transmit the API on a continuous and timely basis. Zaui is not, however, responsible for any failure or malfunction in communications; for any failure or refusal of any third party transmission intermediaries to transmit any API; or for the failure to transmit any API resulting from any natural disasters, wars, labor strike or other events beyond the control of Zaui.

## Limitation of Liability

You acknowledge that, Zaui cannot and does not assume any responsibility for, and shall not be liable for, any damages or expenses you may incur as a result of any inaccuracy, incompleteness or obsolescence of any information contained in the API. You agree that Zaui will not be liable to you or to any other party for any direct or indirect damages, or for any special, exemplary, punitive, incidental, consequential or other damages (including, but not limited to, lost profits or lost time), whether based on contract, tort, strict liability or otherwise, which arise out of or are in any way connected with any access to the API or any contractual or other dealings or relationships you may have with third parties based upon any information included in the Zaui.

## Governing law/Jurisdiction

These terms and conditions and your access to and use of information from the API are governed by the laws of the Province of British Columbia. In the event of any dispute regarding the interpretation or compliance with these terms and conditions, you consent to the exclusive jurisdiction of the Provincial and Federal courts located in British Columbia.

## Entire Agreement

These terms and conditions of use for this API constitute the entire agreement between you and Zaui regarding your access to the API and your reproduction and use of any information in the API. Any waiver of any term or condition shall not be effective unless in a written document signed by an authorized representative of Zaui.
